# Cache bust 2: force rebuild
# Cache bust: force rebuild
# Use official Node.js image
FROM node:20-alpine

WORKDIR /app

COPY package*.json ./
RUN npm install

COPY . .

RUN npm run build && if [ ! -f dist/main.js ]; then echo "ERROR: dist/main.js not found after build"; ls -l dist; exit 1; fi

EXPOSE 3000
CMD ["npm", "start"]
